<div class="card" id="promotions">
    <div class="card-block">
        <table class="table table-hover">
            <thead class="thead">
            <tr>
                <th>Title</th>
                <th>Short Description</th>
                <th>Data / Time of Expiry</th>
                <th>PromoCode</th>
                <th>Rule</th>
            </tr>
            </thead>

            <tbody>
            <tr *ngFor="let p of promotions" (click)="doEdit(p)">
                <td>{{ p.title }}</td>
                <td>{{ p.shortDescription }}</td>
                <td>{{ p.expirationDateTime | date: 'medium' }}</td>
                <td>{{ p.promoCode }}</td>
                <td>{{ p.rule?.description }}</td>
            </tr>
            </tbody>
        </table>
        <div class="card-footer text-muted">
            <button type="button" class="btn btn-primary" (click)="doAdd()">Add</button>
        </div>
    </div>
</div>

<!-- Modal -->
<modal #modal (onDismiss)="onDismiss($event)" (onClose)="onClose($event)" (onOpen)="onOpen($event)">
    <modal-header [show-close]="true">
        <h4 class="modal-title">Promotion Form</h4>
    </modal-header>
    <div class="card" id="promotion-form">
        <div class="card-block">
            <promotion-form #form [selectedPromotion]="promotion"></promotion-form>
        </div>
    </div>
    <modal-footer>
        <button type="button" class="btn btn-default" data-dismiss="modal" (click)="modal.dismiss()">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="doSave()">Save</button>
        <button *ngIf="!isAddNewOpt" type="button" class="btn btn-danger" (click)="doDelete()">Delete</button>
    </modal-footer>
</modal>